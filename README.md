# Home Assistant Reminders API Integration

[![hacs_badge](https://img.shields.io/badge/HACS-Custom-41BDF5.svg)](https://github.com/hacs/integration)

A Home Assistant custom integration for managing Apple Reminders through the Reminders API.

## Features

- Create and manage reminders in Apple Reminders
- Expose reminders as To-do entities in Home Assistant
- Create automations based on reminder events
- Full support for reminder lists
- Complete/uncomplete reminders
- Webhook support for real-time updates

## Prerequisites

### 1. Reminders CLI Server

This integration requires the **reminders-cli server** from [https://github.com/cromulus/reminders-cli](https://github.com/cromulus/reminders-cli) to be installed and running on a macOS machine.

**ðŸ“¦ Server Installation:**

The reminders-cli repository includes a comprehensive installation script that sets up everything properly:

```bash
# Clone the reminders-cli repository
git clone https://github.com/cromulus/reminders-cli.git
cd reminders-cli

# Run the installation script (recommended)
bash install-reminders-stack.sh
```

The install script will:
- âœ… Install all dependencies (Caddy, cloudflared, etc.)
- âœ… Set up reminders-api as a LaunchAgent (runs as your user with proper permissions)
- âœ… Configure Caddy reverse proxy for path-based routing
- âœ… Set up Cloudflare Tunnel or Tailscale for remote access
- âœ… Auto-start services on login

**For detailed installation instructions, see the reminders-cli repository.**

**Quick test after installation:**
```bash
curl http://localhost:8080/api/lists
```

### 2. Home Assistant Requirements
- Home Assistant 2024.1.0 or higher (for To-do platform support)

## Installation

### HACS (Recommended)

1. Open HACS in Home Assistant
2. Click on "Integrations"
3. Click the three dots menu in the top right
4. Select "Custom repositories"
5. Add this repository URL: `https://github.com/cromulus/ha-reminders-api`
6. Select "Integration" as the category
7. Click "Add"
8. Find "Reminders API" in the integrations list
9. Click "Download"
10. Restart Home Assistant
11. Go to Settings â†’ Devices & Services
12. Click "Add Integration"
13. Search for "Reminders API"
14. Follow the configuration steps

### Manual Installation

1. Download the `custom_components/reminders_api` directory from this repository
2. Copy it to your Home Assistant `custom_components` directory
3. Restart Home Assistant
4. Go to Settings â†’ Devices & Services
5. Click "Add Integration"
6. Search for "Reminders API"
7. Follow the configuration steps

## Configuration

When adding the integration in Home Assistant, you'll need to provide:

- **Name**: A friendly name for the integration instance (e.g., "My Reminders")
- **URL**: The base URL of your reminders server:
  - With Cloudflare Tunnel: `https://reminders.yourdomain.com`
  - With Tailscale: `https://your-machine.tail-scale.ts.net`
  - Local network: `http://192.168.1.100:8080`
- **Base Path**: The API path prefix (default: `/api` if you used the install script)
  - Leave empty if API is at root
  - Use `/api` if using the recommended Caddy setup
- **Token**: Authentication token (auto-generated by install script or leave blank)

## Usage

Once configured, the integration will:

1. Create To-do entities for each of your reminder lists
2. Sync reminders between Home Assistant and Apple Reminders
3. Allow you to create, complete, and delete reminders through Home Assistant

### Services

The integration provides the following services:

- `todo.add_item`: Create a new reminder
- `todo.update_item`: Update an existing reminder
- `todo.remove_item`: Delete a reminder

### Automations

Example automation to create a reminder:

```yaml
automation:
  - alias: "Create Grocery Reminder"
    trigger:
      platform: state
      entity_id: binary_sensor.fridge_door
      to: "on"
      for: "00:05:00"
    action:
      service: todo.add_item
      target:
        entity_id: todo.reminders_api_groceries
      data:
        item: "Check what's needed from the grocery store"
```

## Troubleshooting

### Lists Not Appearing?

This is usually a server-side issue, not an integration issue.

**Check the server:**
1. Verify reminders-cli server is running: `ps aux | grep reminders-api`
2. Test API directly: `curl http://localhost:8080/api/lists`
3. Check server logs: `tail -f ~/reminders-stack/logs/reminders-api.error.log`

**Common causes:**
- Server running as wrong user (use LaunchAgent, not LaunchDaemon)
- No Reminders permissions granted
- Server not accessing Reminders database

**Solution:**
Use the installation script from [reminders-cli repository](https://github.com/cromulus/reminders-cli) which sets everything up correctly.

### Integration Issues

For Home Assistant integration bugs:
1. Check logs: `grep reminders_api /config/home-assistant.log`
2. Open an issue with logs: https://github.com/cromulus/ha-reminders-api/issues

For server/installation issues:
- See: https://github.com/cromulus/reminders-cli/issues

## Support

For issues, feature requests, or questions, please open an issue on the [GitHub repository](https://github.com/cromulus/ha-reminders-api/issues).

## License

This project is licensed under the MIT License - see the LICENSE file for details.